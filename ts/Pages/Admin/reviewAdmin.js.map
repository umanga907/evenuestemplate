{"version":3,"sources":["webpack://evenues/./Client/Pages/Admin/ReviewAdmin.ts"],"names":[],"mappings":"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","file":"Pages/Admin/reviewAdmin.js","sourcesContent":["import { onDocReady, UiHelper } from '../../Common/UiHelper';\r\nimport { HttpManager } from \"../../Common/HttpManager\";\r\nimport { GridManager, GridSetting } from '../../Common/GridManager'\r\nimport { html } from 'gridjs';\r\n\r\nexport class ReviewAdminManager {\r\n\r\n    private _gridManager: GridManager;\r\n    private _userRole: string = \"\";\r\n    private _httpManager: HttpManager;\r\n    private _hostUrl: string;\r\n    private _hostServiceUrl: string;\r\n    private _uiHelper: UiHelper;\r\n\r\n    async InitGrid(): Promise<void> {\r\n        this._gridManager = new GridManager();\r\n        this._uiHelper = new UiHelper();\r\n        let accessToken = document.getElementById(\"AccessToken\") as HTMLInputElement;\r\n        this._httpManager = new HttpManager(accessToken.value);\r\n        let host = document.getElementById(\"HostName\") as HTMLInputElement;\r\n        this._hostUrl = host.value;\r\n        let hostService = document.getElementById(\"HostServiceUrl\") as HTMLInputElement;\r\n        this._hostServiceUrl = hostService.value;\r\n        let userRole = document.getElementById(\"Role\") as HTMLInputElement;\r\n        this._userRole = userRole.value;\r\n\r\n        let searchButton = document.getElementById(\"searchButton\") as HTMLButtonElement;\r\n        if (searchButton !== null) {\r\n            searchButton.addEventListener(\"click\", (e: Event) => this.Search());\r\n        }\r\n\r\n        let gridSetting = new GridSetting();\r\n        gridSetting.SearchFields = [\"Search_SpaceName\",\"Search_ReviewerName\" ,\"Search_ReviewDate\", \"Search_Rating\"];\r\n        gridSetting.SearchUrl = `${this._hostUrl}/admin/review?handler=Search`;\r\n        gridSetting.CreateUrl = `${this._hostUrl}/admin/review?handler=Create`;\r\n        gridSetting.EditUrl = `${this._hostUrl}/admin/review?handler=Update`;\r\n        gridSetting.DeleteUrl = `${this._hostUrl}/admin/review?handler=Delete`;\r\n        gridSetting.Columns = [\r\n            { id: \"ReviewId\", name: \"\", sort: false, formatter: (cell, row) => html(this.GetCard(this._hostUrl, row)) },\r\n            { id: \"SpaceId\", name: \"Space Id\", sort: false, hidden: true },\r\n            { id: \"SpaceName\", name: \"Space Name\", hidden: true },\r\n            { id: \"ReviewDate\", name: \"Review Date\", sort: true, hidden: true },\r\n            { id: \"Text\", name: \"Text\", hidden: true },\r\n            { id: \"Rating\", name: \"Rating\", hidden: true },\r\n            { id: \"ReviewerName\", name: \"Reviewer Name\", hidden: true },\r\n            { id: \"Email\", name: \"Reviewer Email\", hidden: true },\r\n        ];\r\n\r\n        this._gridManager.Init(gridSetting);\r\n        this._gridManager.DataGrid.on('ready', async() => (this.InitEvents()));\r\n    }\r\n\r\n    async InitEvents(): Promise<void> {\r\n        //let deleteReviewElements = document.getElementsByClassName(\"btn btn-danger btn-sm delete-review\");\r\n        //for (let element of Array.from(deleteReviewElements)) {\r\n        //    element.addEventListener(\"click\", async (e: Event) => this.DeleteReview(element.id))\r\n        //}\r\n        let paginationText = document.getElementsByClassName(\"gridjs-summary\");\r\n        const ths = document.querySelectorAll('th[data-column-id]');\r\n        (ths[0] as HTMLElement).innerText = (paginationText[0] as HTMLElement).innerText;\r\n    }\r\n    \r\n    async DeleteReview(controlId: string): Promise<void> {\r\n        if (confirm(\"Would you like to delete the selected room?\")) {\r\n            let id = controlId.split(\"-\")[2];\r\n            let response = await this._httpManager.deleteJson(`${this._hostServiceUrl}/v1/review/Delete/${id}`, \"\");\r\n            if (response.ok) {\r\n                alert(\"Deleted Sucessfully!\");\r\n            } else {\r\n                alert(\"Faild to Delete!\");\r\n            }\r\n        }\r\n    }\r\n    GetRatings(row: any): string {\r\n        let starReview = \"\";\r\n        let review: any = row.cells[5].data;\r\n        if (review > 0) {\r\n            if (review == 1) {\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n            }\r\n            if (review == 2) {\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n            }\r\n            if (review == 3) {\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n            }\r\n            if (review == 4) {\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n            }\r\n            if (review == 5) {\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n                starReview += `<i class=\"fas fa-star\"></i>`;\r\n            }\r\n            return starReview;\r\n        } else {\r\n            return \"Not Rated\";\r\n        }\r\n    }\r\n\r\n    GetCard(host: string, row: any): string  {\r\n        return `<div class=\"card mb-3\" style=\"width:100%;z-index:1;\">\r\n  <div class=\"row g-0\">\r\n    <div class=\"col-md-12\">\r\n      <div class=\"card-body\">\r\n        <p><b>Venue Name:</b> ${row.cells[2].data} ${this.GetRatings(row)}</p>\r\n        <p><b>Posted By:</b> <a href=\"mailto:${row.cells[7].data??\"#\"}\"> ${row.cells[6].data}</a> <b>on</b> ${this._uiHelper.GetDateString(row.cells[3].data)}</p>\r\n        <p>${row.cells[4].data}</p>\r\n      </div>\r\n    </div>\r\n</div>\r\n</div>`;\r\n    }\r\n    async Search(): Promise<void> {\r\n        this._gridManager.Search();\r\n    }\r\n\r\n\r\n}\r\nonDocReady(async () => {\r\n    let page = new ReviewAdminManager();\r\n    await page.InitGrid();\r\n});"],"sourceRoot":""}